<div class="page-wrapper">
  <div class="page-header">
    <button class="button-secondary back" (click)="back()">
      <img src="/assets/icons/icon-arrow-left-blue.svg" />
    </button>
    <h4>Profile</h4>
    <button class="button-secondary edit" (click)="toggleEditMode()">
      <img src="/assets/icons/icon-pencil.svg" />
    </button>
  </div>

  <div class="page-container">
    <div class="page-content">
      <div class="user-info" *ngIf="!editMode">
        <div class="user-info-group">
          <label>Name</label>
          <h4>{{ currentUser.firstname }} {{ currentUser.lastname }}</h4>
        </div>

        <div class="user-info-group">
          <label>E-mail</label>
          <h4>{{ currentUser.email }}</h4>
        </div>
      </div>

      <div class="settings-form" *ngIf="editMode">
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <app-input
              [errors]="
                !getControl('firstname').valid &&
                getControl('firstname').touched
                  ? getErrorMessage('firstname')
                  : ''
              "
              [placeholder]="'Firstname'"
              name="firstname"
              type="text"
              [label]="'Firstname'"
              formControlName="firstname"
            >
            </app-input>
          </div>

          <div class="form-group">
            <app-input
              [errors]="
                !getControl('lastname').valid && getControl('lastname').touched
                  ? getErrorMessage('lastname')
                  : ''
              "
              [placeholder]="'Lastname'"
              name="lastname"
              type="text"
              [label]="'Lastname'"
              formControlName="lastname"
            >
            </app-input>
          </div>

          <div class="form-group">
            <app-input
              [errors]="
                !getControl('email').valid && getControl('email').touched
                  ? getErrorMessage('email')
                  : ''
              "
              [placeholder]="'Email'"
              name="email"
              type="text"
              [label]="'Email'"
              formControlName="email"
            >
            </app-input>
          </div>

          <div class="form-group">
            <app-input
              [errors]="
                !getControl('password').valid && getControl('password').touched
                  ? getErrorMessage('password')
                  : ''
              "
              [placeholder]="'New assword'"
              name="password"
              type="password"
              [required]="false"
              [label]="'Change Password'"
              formControlName="password"
            >
            </app-input>
          </div>

          <div class="form-group">
            <app-input
              [errors]="
                !getControl('confirmPassword').valid &&
                getControl('confirmPassword').touched
                  ? getErrorMessage('confirmPassword')
                  : ''
              "
              [placeholder]="'Confirm new password'"
              name="confirmPassword"
              type="password"
              [required]="false"
              [label]="'Confirm new password'"
              formControlName="confirmPassword"
            >
            </app-input>
          </div>

          <div class="button-wrapper">
            <button type="submit" class="btn btn-primary btn-shadow">
              Save Changes
            </button>
            <p
              style="color: var(--theme-green) !important"
              *ngIf="successMessage"
            >
              Your user information has been successfully updated
            </p>
          </div>
        </form>
      </div>

      <div class="button-wrapper">
        <button class="btn btn-primary btn-shadow btn-red" (click)="logout()">
          Logout
        </button>
      </div>
    </div>
  </div>
</div>
